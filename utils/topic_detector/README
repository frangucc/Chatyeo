# Setup process to install the Wikipedia Miner on Ubuntu Karmic Koala
# Make sure that the server is fully up-to-date (if directories are missing, just create them using mkdir DIR_NAME

sudo apt-get update
sudo apt-get upgrade

# install LAMP
sudo apt-get install lamp-server^

#for mysql set password to "temp4now" without quotes
mysql -u root -p

# enter pw when prompted
mysql> CREATE USER 'wikiuser'@'localhost' IDENTIFIED BY 'z8efx';
Query OK, 0 rows affected (0.00 sec)

mysql> CREATE DATABASE wikipedia;
Query OK, 1 row affected (0.00 sec)

mysql> GRANT ALL ON wikipedia.* TO 'wikiuser'@'localhost' IDENTIFIED BY 'z8efx';
Query OK, 0 rows affected (0.00 sec)

mysql> SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| information_schema | 
| mysql              | 
| wikipedia          | 
+--------------------+
3 rows in set (0.00 sec)

mysql> exit;
Bye

================
# add public key to github.com

cd ~/.ssh
ssh-keygen -t rsa -C"Wikipedia Miner Server"

#(press enter throughout the proccess)

cat id_rsa.pub

#copy and paste on git's public key section
================

# download Jay's code from git

sudo apt-get install git-core
cd ~/projects
git clone git@github.com:frangucc/Chatyeo.git chatyeo

# download Wikipedia miner data

cd ~/
wget http://cdnetworks-us-2.dl.sourceforge.net/project/wikipedia-miner/data/en_20090306/en_20090306.tar.gz
tar -zxvf en_20090306.tar.gz
sudo mv -rf en_20090306/ ~/projects/chatyeo/utils/topic_detector
cd ~/projects/chatyeo/utils/topic_detector

# we install a java compiler, depending on the OS version you will need one of these;

sudo apt-get install sun-java6-jdk
# or 
sudo apt-get install openjdk-6-jdk

# Now we compile and try to upload data to the db

make
make wikiminer
make test

#pray to the lord if it works! (this process will take a few hours)

#once all this complete

./run_topicdetector_server 

